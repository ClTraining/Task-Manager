using System;
using System.Collections.Generic;
<<<<<<< HEAD:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/TableFormatter.cs
using System.Linq;
=======
>>>>>>> 92da69e... Fixed formatters:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/ListTaskFormatter.cs
using System.Text;
using EntitiesLibrary;
using FluentAssertions;
using Xunit;

namespace TaskManagerClientLibrary.ConcreteHandlers.TaskFormatter
{
<<<<<<< HEAD:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/TableFormatter.cs
    public class TableFormatter : ITaskFormatter
=======
    public class ListTaskFormatter : ITaskFormatter
>>>>>>> 92da69e... Fixed formatters:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/ListTaskFormatter.cs
    {
        private const int PosId = 5;
        private const int PosName = 15;
        private const int PosCompleted = 13;
        private readonly string format;

<<<<<<< HEAD:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/TableFormatter.cs
        public TableFormatter()
=======
        public ListTaskFormatter()
>>>>>>> 92da69e... Fixed formatters:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/ListTaskFormatter.cs
        {
            format = "{0,-" + PosId + "} | {1," + PosName + "} | {2," + PosCompleted + "}";
        }

<<<<<<< HEAD:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/TableFormatter.cs
        public bool CouldUse(string input)
        {
            return !String.IsNullOrEmpty(input);
=======
        public bool CouldUse(int? input)
        {
            return input != null;
>>>>>>> 92da69e... Fixed formatters:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/ListTaskFormatter.cs
        }

        public string Show(List<ContractTask> tasks)
        {
            var taskString = new StringBuilder();
            taskString.AppendLine(PrintHeader());

            tasks.ForEach(x => taskString.AppendLine(String.Format(format, x.Id, (x.Name.Length > PosName) ? x.Name.Remove(PosName) : x.Name, x.IsCompleted ? "+" : "-")));

            return taskString.ToString();
        }

        private string PrintHeader()
        {
            return string.Format(format, "Id", "Name", "Completed");
        }
    }

<<<<<<< HEAD:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/TableFormatter.cs
    public class TableFormatterTests
=======
    public class ListTaskFormatterTests
>>>>>>> 92da69e... Fixed formatters:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/ListTaskFormatter.cs
    {
        [Fact]
        public void should_print_header_for_empty_list()
        {
<<<<<<< HEAD:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/TableFormatter.cs
            var formatter = new TableFormatter();
=======
            var formatter = new ListTaskFormatter();
>>>>>>> 92da69e... Fixed formatters:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/ListTaskFormatter.cs
            var sb = new StringBuilder();
            sb.Append(formatter.Show(new List<ContractTask>()));
            sb.ToString().Should().Be("Id    |            Name |     Completed\r\n");
        }

        [Fact]
        public void should_console_out_task_table()
        {
<<<<<<< HEAD:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/TableFormatter.cs
            var formatter = new TableFormatter();
=======
            var formatter = new ListTaskFormatter();
>>>>>>> 92da69e... Fixed formatters:TaskManagerClientLibrary/ConcreteHandlers/TaskFormatter/ListTaskFormatter.cs
            var sb = new StringBuilder();
            sb.Append(formatter.Show(new List<ContractTask>() { new ContractTask() { Id = 1, Name = "abcd123456789000000000000" } }));
            sb.ToString().Should().Be("Id    |            Name |     Completed\r\n1     | abcd12345678900 |             -\r\n");
        }
    }
}